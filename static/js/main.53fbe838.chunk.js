(this["webpackJsonpcards-app"]=this["webpackJsonpcards-app"]||[]).push([[0],{18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(3),i=a.n(r),c=a(10),s=a.n(c),u=(a(18),a(12)),o=a(1),d=a.n(o),l=a(4),h=a(5),p=a(6),b=a(2),g=a(8),f=a(7),j=(a(20),a(11)),v=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=e.quantity,i=e.cardValue;return n.state={quantity:r,cardValue:i},n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(j.a)({},t.name,t.value))}},{key:"onSubmit",value:function(e){this.props.onOrderSubmit(this.state),e.preventDefault()}},{key:"render",value:function(){var e=this.state,t=e.quantity,a=e.cardValue,r=this.props,i=r.inEditMode,c=r.title,s=r.disabled;return Object(n.jsx)("form",{onSubmit:this.onSubmit,children:Object(n.jsxs)("fieldset",{children:[Object(n.jsx)("strong",{children:c}),Object(n.jsx)("p",{children:Object(n.jsxs)("label",{htmlFor:"quantity",children:["Please enter quantity of cards: \xa0",Object(n.jsx)("input",{type:"number",name:"quantity",min:1,max:100,onChange:this.handleChange,value:t,disabled:s,required:!0})]})}),Object(n.jsx)("p",{children:Object(n.jsxs)("label",{htmlFor:"cardValue",children:["Please enter price for each card: \xa0",Object(n.jsx)("input",{type:"number",name:"cardValue",min:5,max:150,onChange:this.handleChange,value:a,disabled:s,required:!0})]})}),!i&&Object(n.jsx)("button",{type:"submit",disabled:s,children:"Add Package"}),i&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{type:"submit",disabled:s,children:"Save"}),"\xa0",Object(n.jsx)("button",{type:"button",onClick:this.props.onOrderRemove,disabled:s,children:"Remove"})]})]})})}}]),a}(r.Component);v.defaultProps={quantity:0,cardValue:0,inEditMode:!1,disabled:!1};var m=v,O=(a(21),function(e){var t=e.packages,a=e.onModifyPackage,r=e.disabled;return Object(n.jsx)("ul",{className:"packages-list",children:t.map((function(e,t){var i="Package ".concat(t+1);return Object(n.jsxs)("li",{className:"packages-list__item",children:[Object(n.jsx)("span",{children:i}),Object(n.jsxs)("span",{children:["\u20ac",e.getTotalPrice().toFixed(2)]}),Object(n.jsx)("button",{type:"button",onClick:function(){return a(e.id)},disabled:r,children:"Modify"})]},e.id)}))})});O.defaultProps={disabled:!1};var k=O,y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a="".concat(t);return a.length<5?e("0".concat(a)):a},x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;Object(h.a)(this,e),this.quantity=t,this.price=a,this.id="".concat((new Date).getTime())}return Object(p.a)(e,[{key:"getSKU",value:function(){return"LECA".concat(y(this.quantity*this.price*100))}},{key:"getTotalPrice",value:function(){return this.quantity*this.price}}]),e}();function S(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(d.a.mark((function e(t){var a,n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://staging.nxte.nl:5000/graphql",{method:"POST",mode:"no-cors",headers:{"x-store":"7","Content-Type":"application/json"},body:JSON.stringify({query:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,!((r=n.errors||[]).length>0)){e.next=12;break}if(r[0]){e.next=10;break}throw Error("There was an error with processing the request. Please try to update values and execute it again.");case 10:throw i=r.map((function(e){return e.message})),Error(i.join("<br />"));case 12:return e.abrupt("return",n.data);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S('mutation{\n    addPackageToCart(sku: "'.concat(t,'", quantity: ').concat(a,", personalMessage: false){\n      id,\n      items {\n        id\n      }\n    }\n  }"));case 2:return n=e.sent,r=n.addPackageToCart.items,e.abrupt("return",r[r.length-1].id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S('mutation{\n    removeItemFromCart(cartItemId: "'.concat(t,'"){\n      id,\n    }\n  }'));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,errorMessage:null,activeId:null,packages:[]},n.switchToPackageEdit=n.switchToPackageEdit.bind(Object(b.a)(n)),n.onOrderSubmit=n.onOrderSubmit.bind(Object(b.a)(n)),n.onOrderRemove=n.onOrderRemove.bind(Object(b.a)(n)),n.createCardsPackage=n.createCardsPackage.bind(Object(b.a)(n)),n.updateCardsPackage=n.updateCardsPackage.bind(Object(b.a)(n)),n}return Object(p.a)(a,[{key:"onOrderSubmit",value:function(e){this.setState({isLoading:!0,errorMessage:null});var t=this.state.activeId,a=parseInt(e.quantity,10),n=parseInt(e.cardValue,10);t?(this.setState({activeId:null}),this.updateCardsPackage(t,a,n)):this.createCardsPackage(a,n)}},{key:"onOrderRemove",value:function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0,errorMessage:null}),t=this.state.activeId,e.prev=2,e.next=5,q(t);case 5:this.setState((function(e){return{activeId:null,packages:e.packages.filter((function(e){return e.id!==t}))}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({errorMessage:e.t0.message});case 11:return e.prev=11,this.setState({isLoading:!1}),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[2,8,11,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"createCardsPackage",value:function(){var e=Object(l.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new x(t,a),e.prev=1,e.next=4,C(n.getSKU(),n.quantity);case 4:r=e.sent,n.id=r,this.setState((function(e){return{packages:[].concat(Object(u.a)(e.packages),[n])}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({errorMessage:e.t0.message});case 12:return e.prev=12,this.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[1,9,12,15]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateCardsPackage",value:function(e,t,a){this.setState((function(n){return{packages:n.packages.map((function(n){return n.id===e&&(n.quantity=t,n.price=a),n}))}}))}},{key:"switchToPackageEdit",value:function(e){this.setState({activeId:e})}},{key:"render",value:function(){var e=this.state,t=e.packages,a=e.activeId,r=e.errorMessage,i=e.isLoading,c=t.filter((function(e){return e.id===a}))[0]||{};return Object(n.jsxs)("div",{className:"App",children:[r,Object(n.jsx)(k,{packages:t,onModifyPackage:this.switchToPackageEdit,disabled:!!a||i}),Object(n.jsx)(m,{title:"Package ".concat((a?t.indexOf(c):t.length)+1),onOrderSubmit:this.onOrderSubmit,onOrderRemove:this.onOrderRemove,quantity:c.quantity,cardValue:c.price,inEditMode:!!a,disabled:i},a||t.length)]})}}]),a}(r.Component),T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),T()}},[[22,1,2]]]);
//# sourceMappingURL=main.53fbe838.chunk.js.map