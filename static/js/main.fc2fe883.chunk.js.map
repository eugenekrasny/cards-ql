{"version":3,"sources":["components/OrderForm.js","components/PackagesList.js","CardsPackage.js","dataLoader.js","App.js","reportWebVitals.js","index.js"],"names":["OrderForm","props","quantity","cardValue","state","onSubmit","bind","handleChange","target","this","setState","name","value","event","onOrderSubmit","preventDefault","inEditMode","title","disabled","htmlFor","type","min","max","onChange","required","onClick","onOrderRemove","Component","defaultProps","SinglePackage","packages","onModifyPackage","className","map","pack","index","getTotalPrice","toFixed","id","formatP","retValue","length","CardsPackage","price","Date","getTime","runQuery","query","a","fetch","method","headers","body","JSON","stringify","response","json","errors","Error","errorMessages","error","message","join","data","addPackageToCart","sku","items","removePackageFromCart","App","isLoading","errorMessage","activeId","switchToPackageEdit","createCardsPackage","updateCardsPackage","order","parseInt","prevState","filter","localPackage","getSKU","remotePackageId","cardsPackage","activePackage","indexOf","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fc2fe883.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  title: PropTypes.string.isRequired,\n  onOrderSubmit: PropTypes.func.isRequired,\n  onOrderRemove: PropTypes.func.isRequired,\n  quantity: PropTypes.number,\n  cardValue: PropTypes.number,\n  inEditMode: PropTypes.bool,\n  disabled: PropTypes.bool,\n};\n\nconst defaultProps = {\n  quantity: 0,\n  cardValue: 0,\n  inEditMode: false,\n  disabled: false,\n};\n\nclass OrderForm extends Component {\n  constructor(props) {\n    super(props);\n    const { quantity, cardValue } = props;\n    this.state = {\n      quantity,\n      cardValue,\n    };\n    this.onSubmit = this.onSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange({ target }) {\n    this.setState({\n      [target.name]: target.value,\n    });\n  }\n\n  onSubmit(event) {\n    this.props.onOrderSubmit(this.state);\n    event.preventDefault();\n  }\n\n  render() {\n    const { quantity, cardValue } = this.state;\n    const { inEditMode, title, disabled } = this.props;\n    return (\n      <form onSubmit={this.onSubmit}>\n        <fieldset>\n          <strong>{title}</strong>\n          <p>\n            <label htmlFor=\"quantity\">\n              Please enter quantity of cards:\n              &nbsp;\n              <input\n                type=\"number\"\n                name=\"quantity\"\n                min={1}\n                max={100}\n                onChange={this.handleChange}\n                value={quantity}\n                disabled={disabled}\n                required\n              />\n            </label>\n          </p>\n          <p>\n            <label htmlFor=\"cardValue\">\n              Please enter price for each card:\n              &nbsp;\n              <input\n                type=\"number\"\n                name=\"cardValue\"\n                min={5}\n                max={150}\n                onChange={this.handleChange}\n                value={cardValue}\n                disabled={disabled}\n                required\n              />\n            </label>\n          </p>\n          {!inEditMode && <button type=\"submit\" disabled={disabled}>Add Package</button>}\n          {inEditMode\n            && (\n              <>\n                <button type=\"submit\" disabled={disabled}>Save</button>\n                &nbsp;\n                <button type=\"button\" onClick={this.props.onOrderRemove} disabled={disabled}>Remove</button>\n              </>\n            )}\n        </fieldset>\n      </form>\n    );\n  }\n}\n\nOrderForm.defaultProps = defaultProps;\nOrderForm.propTypes = propTypes;\n\nexport default OrderForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport '../PackagesList.css';\n\nconst propTypes = {\n  packages: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onModifyPackage: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n\nconst defaultProps = {\n  disabled: false,\n};\n\nconst SinglePackage = ({ packages, onModifyPackage, disabled }) => (\n  <ul className=\"packages-list\">\n    {packages.map((pack, index) => {\n      const title = `Package ${index + 1}`;\n      return (\n        <li className=\"packages-list__item\" key={pack.id}>\n          <span>{title}</span>\n          <span>\n            â‚¬\n            {pack.getTotalPrice().toFixed(2)}\n          </span>\n          <button\n            type=\"button\"\n            onClick={() => onModifyPackage(pack.id)}\n            disabled={disabled}\n          >\n            Modify\n          </button>\n        </li>\n      );\n    })}\n  </ul>\n);\n\nSinglePackage.defaultProps = defaultProps;\nSinglePackage.propTypes = propTypes;\n\nexport default SinglePackage;\n","const formatP = (value = 0) => {\n  const retValue = `${value}`;\n  if (retValue.length < 5) {\n    return formatP(`0${retValue}`);\n  }\n  return retValue;\n};\n\nclass CardsPackage {\n  constructor(quantity = 1, price = 5) {\n    this.quantity = quantity;\n    this.price = price;\n    this.id = `${new Date().getTime()}`;\n  }\n\n  getSKU() {\n    return `LECA${formatP(this.quantity * this.price * 100)}`;\n  }\n\n  getTotalPrice() {\n    return this.quantity * this.price;\n  }\n}\n\nexport default CardsPackage;\n","/* eslint-env browser */\n\n/*\nmutation{\n  addPackageToCart(sku: \"LECA01000\", quantity: 5, personalMessage: false){\n    items {\n      id,\n      quantity,\n    },\n  }\n\n#  removeItemFromCart(cartItemId: \"10586\") {\n#    id\n#  }\n}\n*/\nasync function runQuery(query) {\n  const response = await fetch(\n    'https://staging.nxte.nl:5000/graphql',\n    {\n      method: 'POST',\n      // credentials: 'include',\n      // mode: 'cors',\n      headers: {\n        'x-store': '7',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ query }),\n    },\n  );\n  const json = await response.json();\n  const errors = json.errors || [];\n  if (errors.length > 0) {\n    if (!errors[0]) {\n      throw Error('There was an error with processing the request. Please try to update values and execute it again.');\n    }\n    const errorMessages = errors.map((error) => error.message);\n    throw Error(errorMessages.join('<br />'));\n  }\n  return json.data;\n}\n\nexport async function addPackageToCart(sku, quantity) {\n  const json = await runQuery(`mutation{\n    addPackageToCart(sku: \"${sku}\", quantity: ${quantity}, personalMessage: false){\n      id,\n      items {\n        id\n      }\n    }\n  }`);\n  const { addPackageToCart: { items } } = json;\n  return items[items.length - 1].id;\n}\n\nexport async function removePackageFromCart(id) {\n  const json = await runQuery(`mutation{\n    removeItemFromCart(cartItemId: \"${id}\"){\n      id,\n    }\n  }`);\n  return json.data;\n}\n\nexport default {\n  addPackageToCart,\n  removePackageFromCart,\n};\n","import React, { Component } from 'react';\nimport './App.css';\nimport OrderForm from './components/OrderForm';\nimport PackagesList from './components/PackagesList';\nimport CardsPackage from './CardsPackage';\nimport { addPackageToCart, removePackageFromCart } from './dataLoader';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      errorMessage: null,\n      activeId: null,\n      packages: [],\n    };\n    this.switchToPackageEdit = this.switchToPackageEdit.bind(this);\n    this.onOrderSubmit = this.onOrderSubmit.bind(this);\n    this.onOrderRemove = this.onOrderRemove.bind(this);\n    this.createCardsPackage = this.createCardsPackage.bind(this);\n    this.updateCardsPackage = this.updateCardsPackage.bind(this);\n  }\n\n  onOrderSubmit(order) {\n    this.setState({ isLoading: true, errorMessage: null });\n    const { activeId } = this.state;\n    const quantity = parseInt(order.quantity, 10);\n    const price = parseInt(order.cardValue, 10);\n    if (activeId) {\n      this.setState({ activeId: null });\n      this.updateCardsPackage(activeId, quantity, price);\n    } else {\n      this.createCardsPackage(quantity, price);\n    }\n  }\n\n  async onOrderRemove() {\n    this.setState({ isLoading: true, errorMessage: null });\n    const { activeId } = this.state;\n    try {\n      await removePackageFromCart(activeId);\n      this.setState((prevState) => ({\n        activeId: null,\n        packages: prevState.packages.filter((pack) => pack.id !== activeId),\n      }));\n    } catch (error) {\n      this.setState({ errorMessage: error.message });\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  async createCardsPackage(quantity, price) {\n    const localPackage = new CardsPackage(quantity, price);\n    try {\n      const remotePackageId = await addPackageToCart(localPackage.getSKU(), localPackage.quantity);\n      localPackage.id = remotePackageId;\n      this.setState((prevState) => ({\n        packages: [\n          ...prevState.packages,\n          localPackage,\n        ],\n      }));\n    } catch (error) {\n      this.setState({ errorMessage: error.message });\n    } finally {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  updateCardsPackage(id, quantity, price) {\n    this.setState((prevState) => ({\n      packages: prevState.packages.map((cardsPackage) => {\n        if (cardsPackage.id === id) {\n          cardsPackage.quantity = quantity;\n          cardsPackage.price = price;\n        }\n        return cardsPackage;\n      }),\n    }));\n  }\n\n  switchToPackageEdit(id) {\n    this.setState({ activeId: id });\n  }\n\n  render() {\n    const {\n      packages, activeId, errorMessage, isLoading,\n    } = this.state;\n    const activePackage = packages.filter((pack) => pack.id === activeId)[0] || {};\n    return (\n      <div className=\"App\">\n        {errorMessage}\n        <PackagesList\n          packages={packages}\n          onModifyPackage={this.switchToPackageEdit}\n          disabled={!!activeId || isLoading}\n        />\n        <OrderForm\n          title={`Package ${(activeId ? packages.indexOf(activePackage) : packages.length) + 1}`}\n          key={activeId || packages.length}\n          onOrderSubmit={this.onOrderSubmit}\n          onOrderRemove={this.onOrderRemove}\n          quantity={activePackage.quantity}\n          cardValue={activePackage.price}\n          inEditMode={!!activeId}\n          disabled={isLoading}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","/* eslint-disable */\nconst reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}