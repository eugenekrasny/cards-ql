(this["webpackJsonpcards-app"]=this["webpackJsonpcards-app"]||[]).push([[0],{19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(3),c=a.n(r),i=a(12),s=a.n(i),u=(a(19),a(11)),o=a(13),d=a(1),p=a.n(d),l=a(4),h=a(6),b=a(7),g=a(2),f=a(9),j=a(8),k=(a(21),a(5)),v=function(e){Object(f.a)(a,e);var t=Object(j.a)(a);function a(e){var n;Object(h.a)(this,a),n=t.call(this,e);var r=e.quantity,c=e.price;return n.state={quantity:r,price:c},n.onSubmit=n.onSubmit.bind(Object(g.a)(n)),n.handleChange=n.handleChange.bind(Object(g.a)(n)),n}return Object(b.a)(a,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(k.a)({},t.name,t.value))}},{key:"onSubmit",value:function(e){(0,this.props.onPackageSubmit)(this.state),e.preventDefault()}},{key:"render",value:function(){var e=this.state,t=e.quantity,a=e.price,r=this.props,c=r.inEditMode,i=r.title,s=r.disabled,u=r.onPackageRemove,o=r.onEditCancel;return Object(n.jsx)("form",{onSubmit:this.onSubmit,children:Object(n.jsxs)("fieldset",{children:[Object(n.jsx)("strong",{children:i}),Object(n.jsx)("p",{children:Object(n.jsxs)("label",{htmlFor:"quantity",children:["Please enter quantity of cards: \xa0",Object(n.jsx)("input",{type:"number",name:"quantity",min:1,max:100,onChange:this.handleChange,value:t,disabled:s,required:!0})]})}),Object(n.jsx)("p",{children:Object(n.jsxs)("label",{htmlFor:"price",children:["Please enter price for each card: \xa0",Object(n.jsx)("input",{type:"number",name:"price",min:5,max:150,onChange:this.handleChange,value:a,disabled:s||c,required:!0})]})}),!c&&Object(n.jsx)("button",{type:"submit",disabled:s,children:"Add Package"}),c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{type:"submit",disabled:s,children:"Save"}),"\xa0",Object(n.jsx)("button",{type:"button",onClick:u,disabled:s,children:"Remove"}),"\xa0",Object(n.jsx)("button",{type:"button",onClick:o,disabled:s,children:"Cancel"})]})]})})}}]),a}(r.Component);v.defaultProps={quantity:0,price:0,inEditMode:!1,disabled:!1};var m=v,O=(a(22),function(e){var t=e.packages,a=e.onModifyPackage,r=e.disabled;return Object(n.jsx)("ul",{className:"packages-list",children:t.map((function(e,t){var c=e.id,i=e.quantity,s=e.price,u="Package ".concat(t+1);return Object(n.jsxs)("li",{className:"packages-list__item",children:[Object(n.jsx)("span",{children:u}),Object(n.jsxs)("span",{children:["\u20ac",(s*i).toFixed(2)]}),Object(n.jsx)("button",{type:"button",onClick:function(){return a(c)},disabled:r,children:"Modify"})]},c)}))})});O.defaultProps={disabled:!1};var x=O,y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a="".concat(t);return a.length<5?e("0".concat(a)):a};function P(e){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://staging.nxte.nl:5000/graphql",{method:"POST",credentials:"include",headers:{"x-store":"7","Content-Type":"application/json"},body:JSON.stringify({query:t})});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,!((r=n.errors||[]).length>0)){e.next=12;break}if(r[0]){e.next=10;break}throw Error("There was an error with processing the request. Please try to update values and execute it again.");case 10:throw c=r.map((function(e){return e.message})),Error(c.join("<br />"));case 12:return e.abrupt("return",n.data);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P('mutation {\n    addPackageToCart(sku: "LECA'.concat(y(t*a*100),'", quantity: ').concat(t,", personalMessage: false) {\n      id,\n      items {\n        id\n      }\n    }\n  }"));case 2:return n=e.sent,r=n.addPackageToCart.items,e.abrupt("return",r[r.length-1].id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P('mutation {\n    updateItemInCart(cartItemId: "'.concat(t,'", quantity: ').concat(a,") {\n      items {\n        id\n      }\n    }\n  }"));case 2:return n=e.sent,r=n.addPackageToCart.items,e.abrupt("return",r[r.length-1].id);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P('mutation {\n    removeItemFromCart(cartItemId: "'.concat(t,'") {\n      id,\n    }\n  }'));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){Object(f.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,errorMessage:null,activeId:null,packages:[]},n.switchToPackageEdit=n.switchToPackageEdit.bind(Object(g.a)(n)),n.cancelPackageEdit=n.cancelPackageEdit.bind(Object(g.a)(n)),n.onPackageSubmit=n.onPackageSubmit.bind(Object(g.a)(n)),n.onPackageRemove=n.onPackageRemove.bind(Object(g.a)(n)),n.createCardsPackage=n.createCardsPackage.bind(Object(g.a)(n)),n.updateCardsPackage=n.updateCardsPackage.bind(Object(g.a)(n)),n}return Object(b.a)(a,[{key:"onPackageSubmit",value:function(e){this.setState({isLoading:!0,errorMessage:null});var t=this.state.activeId,a=parseInt(e.quantity,10),n=parseInt(e.price,10);t?this.updateCardsPackage(t,a,n):this.createCardsPackage(a,n)}},{key:"onPackageRemove",value:function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0,errorMessage:null}),t=this.state.activeId,e.prev=2,e.next=5,I(t);case 5:this.cancelPackageEdit(),this.setState((function(e){return{packages:e.packages.filter((function(e){return e.id!==t}))}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({errorMessage:e.t0.message});case 12:return e.prev=12,this.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"createCardsPackage",value:function(){var e=Object(l.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t,a);case 3:n=e.sent,this.setState((function(e){return{packages:[].concat(Object(o.a)(e.packages),[{quantity:t,price:a,id:n}])}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({errorMessage:e.t0.message});case 10:return e.prev=10,this.setState({isLoading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateCardsPackage",value:function(){var e=Object(l.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t,a);case 3:this.cancelPackageEdit(),this.setState((function(e){return{packages:e.packages.map((function(e){return e.id===t?Object(u.a)(Object(u.a)({},e),{},{quantity:a,price:n}):e}))}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({errorMessage:e.t0.message});case 10:return e.prev=10,this.setState({isLoading:!1}),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"switchToPackageEdit",value:function(e){this.setState({activeId:e})}},{key:"cancelPackageEdit",value:function(){this.setState({activeId:null})}},{key:"render",value:function(){var e=this.state,t=e.packages,a=e.activeId,r=e.errorMessage,c=e.isLoading,i=t.filter((function(e){return e.id===a}))[0]||{};return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)("p",{className:"app__error",children:r}),Object(n.jsx)(x,{packages:t,onModifyPackage:this.switchToPackageEdit,disabled:!!a||c}),Object(n.jsx)(m,{title:"Package ".concat((a?t.indexOf(i):t.length)+1),onPackageSubmit:this.onPackageSubmit,onPackageRemove:this.onPackageRemove,onEditCancel:this.cancelPackageEdit,quantity:i.quantity,price:i.price,inEditMode:!!a,disabled:c},a||t.length)]})}}]),a}(r.Component),L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,24)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root")),L()}},[[23,1,2]]]);
//# sourceMappingURL=main.fd1a5cb3.chunk.js.map